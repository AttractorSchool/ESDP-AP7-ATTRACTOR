{% extends 'base_enimi.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% block search_btn %}
{% endblock %}
{% block content %}

    <div class="box" style="width:auto; background-color:white; border-radius: 15px; margin: -30px; min-height: 300px">
        <section class="blog_area section_gap">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="blog_right_sidebar">
                            <aside class="single_sidebar_widget author_widget">
                                <img class="author_img rounded-circle" style="width: 60%; border-radius: 100px;"
                                     src="{{ request.user.avatar.url }}" alt="">
                                <h4>{{ request.user.first_name }}</h4>
                                <h4 style="margin-top: 5px;">{{ request.user.last_name }}</h4>
                                <p>{{ request.user.get_type_display }}</p>
                                <div class="social_icon">
                                    <a href="#"><i class="ti-facebook"></i></a>
                                    <a href="#"><i class="ti-twitter"></i></a>
                                    <a href="#"><i class="ti-github"></i></a>
                                    <a href="#"><i class="ti-linkedin"></i></a>
                                </div>
                                <p>
                                    <a href="{% url 'change_password' user.pk %}">Смена пароля</a>
                                </p>
                                <div class="row justify-content-center" style="margin-top: 30px">
                                    <div class="schedule_btn" style="margin-bottom: 30px">
                                        <a href="{% url 'calendarapp:calendar' %}">
                                            <button class="tut__connection_btn">Расписание</button>
                                        </a>
                                    </div>
                                    <div class="col-12 text-center">
                                        <button type="button" id="add-modal-register-answer-btn-left" class="blog_btn"
                                                style="border-radius: 10px">Зарегистрировать ребёнка
                                        </button>
                                    </div>

                                </div>
                                <!--                                <p>Boot camps have its supporters andit sdetractors. Some people do not understand why you-->
                                <!--                                    should have to spend money on boot camp when you can get. Boot camps have itssuppor-->
                                <!--                                    ters andits detractors.</p>-->
                                <div class="br">
                                    <div style="text-align: center; background-color: #f1f9ff; border-radius: 10px; -webkit-box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2);
                                        -moz-box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2);
                                        box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2); ">
                                        <div class="nav-link" aria-current="page"
                                             style="padding-right: 20px"
                                             href="#">
                                            <body onload="clockTimer();">

                                            <div class="clockpage">
                                                        <span style="font-size: 25px; font-family: 'Titillium Web', sans-serif; color: #7b838a; font-weight: bold"
                                                              id="clock"></span>
                                                <span style="display: block;" id="dayOfWeek"></span>
                                            </div>
                                            </body>
                                        </div>
                                    </div>
                                </div>
                            </aside>

                            <aside class="single_sidebar_widget ads_widget">
                                <a href="#"><img class="img-fluid" src="img/blog/add.jpg" alt=""></a>
                                <div class="br"></div>
                            </aside>

                        </div>
                    </div>

                    <div class="col-lg-9">
                        <div class="mini-navbar" style="-webkit-box-shadow: -1px 1px 8px 2px rgba(34, 60, 80, 0.16);
-moz-box-shadow: -1px 1px 8px 2px rgba(34, 60, 80, 0.16);
box-shadow: -1px 1px 8px 2px rgba(34, 60, 80, 0.16);">
                            <nav class="navbar navbar-expand-lg bg-light" style="background-color: #f1f9ff">
                                <div class="container-fluid">
                                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#navbarSupportedContent"
                                            aria-controls="navbarSupportedContent" aria-expanded="false"
                                            aria-label="Переключатель навигации">
                                        <span class="navbar-toggler-icon"></span>
                                    </button>
                                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                            <li class="nav-item" style="box-shadow: #0c5460">
                                                <a class="nav-link active{% if main_page %} card-header disabled {% endif %}" aria-current="page"
                                                   style="padding-right: 20px"
                                                   href="{% url 'parents_cabinet_detail' request.user.pk %}">Главная</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px"
                                                   href="{% url 'parent_children_rates' request.user.pk %}">Успеваемость</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px"
                                                   href="{% url 'parent_children_surveys' request.user.pk %}">Анкеты
                                                    детей</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px"
                                                   href="{% url 'my_children_tutors' request.user.pk %}">Учителя
                                                    детей</a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px; text-align: center"
                                                   href="{% url 'to_my_children_responses' request.user.pk %}">Отклики
                                                    на детей</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px; text-align: center"
                                                   href="{% url 'from_me-parent_on_tutor_responses' request.user.pk %}">Мои
                                                    Отклики</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" aria-current="page"
                                                   style="padding-right: 20px"
                                                   href="{% url 'from_parent_on_tutor_reviews' request.user.pk %}">Мои
                                                    отзывы</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </nav>

                        </div>


                        <div class="blog_left_sidebar">

                                        <img src="#" alt="">
                                        <div class="blog_details">

                                            {% if children %}
                                                     {% if rates %}
                                                    <h3 class="mb-4">Оценка успеваемости студента</h3>
                                                           <table class="table table-bordered" style="border-radius: 10px">
                                                              <thead>
                                                                <tr style="color: #737678; background-color: #c3e9f7">
                                                                  <th scope="col">#</th>
                                                                  <th scope="col">Занятие</th>
                                                                  <th scope="col">Дата</th>
                                                                  <th scope="col">Ученик</th>
                                                                  <th scope="col">Оценка</th>
                                                                  <th scope="col">Комментарий</th>
                                                                </tr>
                                                              </thead>
                                                              {% for rate in rates %}
                                                              <tbody>

                                                                <tr role="row">
                                                                  <td>{{ forloop.counter }}</td>
                                                                  <td><a href="{% url 'calendarapp:event-detail' rate.event.pk %}">{{ rate.event.title }}</a></td>
                                                                  <td>{{ rate.event.start_time | date:"Y-m-d"}}</td>

                                                                  <td><a href="{% url 'student_board_detail_page' rate.event_member.user.survey.pk %}">
                                                                      <i class="fa-solid fa-graduation-cap"></i> {{ rate.event_member.user.first_name }} {{ rate.event.user.last_name }}</a></td>
                                                                  <td style="text-align: center">{{ rate.score }}</td>
                                                                  <td style="text-align: center">
                                                                      <div class="row justify-content-center">
                                                                          <div class="col-12 text-center">
                                                                              <button class="btn btn-success" type="button" id=""
                                                                                    data-rate_id="{{ rate.pk }}" data-rate_comment="{{ rate.comment }}">Комментарий >>
                                                                              </button>
                                                                          </div>
                                                                      </div>

                                                                  </td>
                                                                </tr>

                                                              </tbody>
                                                              {% endfor%}
                                                            </table>

                                                     {% else %}
                                                        <p>Оценок пока нет</p>
                                                     {% endif %}
                                            {% else %}

                                                <h2>Здравствуй, дорогой пользователь!</h2>


                                                <span>Рады приветствовать тебя в лучшем приложении в мире
                                    Чтобы пользоваться услугами нашего сервиса вам необходимо
                                    зарегистрировать анкету ребенка. Это не займёт много времени!</p>
                                                    <div class="row justify-content-center" style="margin-top: 30px">
                                            <div class="col-12 text-center">
                                                <button type="button" id="add-modal-register-answer-btn"
                                                        class="blog_btn" style="border-radius: 10px">Зарегистрировать ребёнка</button>
                                            </div>
                                        </div>

                                                </div>
                                                </div>
                                                </div>
                                            {% endif %}

                                <!--                                <div class="col-md-3">-->
                                <!--                                    <div class="blog_info text-right">-->
                                <!--                                        <div class="post_tag">-->
                                <!--                                            <a href="#">Food,</a>-->
                                <!--                                            <a class="active" href="#">Technology,</a>-->
                                <!--                                            <a href="#">Politics,</a>-->
                                <!--                                            <a href="#">Lifestyle</a>-->
                                <!--                                        </div>-->
                                <!--                                        <ul class="blog_meta list">-->
                                <!--                                            <li><a href="#">Mark wiens<i class="ti-user"></i></a></li>-->
                                <!--                                            <li><a href="#">12 Dec, 2017<i class="ti-calendar"></i></a></li>-->
                                <!--                                            <li><a href="#">1.2M Views<i class="ti-eye"></i></a></li>-->
                                <!--                                            <li><a href="#">06 Comments<i class="ti-comment"></i></a></li>-->
                                <!--                                        </ul>-->
                                <!--                                    </div>-->
                                <!--                                </div>-->



                </div>
            </div>


            <div id="registerModal" class="modal"
                 style="display: none; width: 100%; height: 100%; border-radius: 30px; background-color: rgba(0,0,0, 0.3); z-index: 1; overflow: auto">
                <div class="modal-content"
                     style="background-color: white; margin: 10% auto; border-radius: 15px; padding: 20px; width: 30%">
                    <h2 style="margin: 30px auto">У ребенка есть email?</h2>
                    <div>

                        <div class="row justify-content-center">
                            <div class="col-6 text-center">
                                <a href="{% url 'parent_create_children' request.user.pk %}">
                                    <button type="button" class="btn btn-primary btn-block">Да</button>
                                </a>
                            </div>
                            <div class="col-6 text-center">
                                <a href="{% url 'parent_create_children_without_email' request.user.pk %}">
                                    <button type="button" class="btn btn-primary btn-block">Нет</button>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>


            <div id="registerModalFormYes" class="modal"
                 style="display: none; width: 100%; height: 100%; border-radius: 30px; background-color: rgba(0,0,0, 0.3); z-index: 1; overflow: auto">
                <div class="modal-content"
                     style="background-color: white; margin: 10% auto; border-radius: 30px; padding: 20px; width: 30%">
                    <h2 style="margin: 30px auto">Регистрация ученика</h2>
                    <div>
                        <form action="{% url 'parent_create_children' request.user.pk %}" method="POST"
                              enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="form" id="form-student">
                                {% bootstrap_form student_register_form %}
                                <div class="row">
                                    <div class="col-6 text-center">
                                        {% bootstrap_button button_type="submit" content='Сохранить' %}
                                    </div>
                                    <div class="col-6 text-center">
                                        <a href="{% url 'parent_create_children_without_email' request.user.pk %}">
                                            <button type="button" class="btn btn-primary btn-block">Нет</button>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </section>


        <div id="registerModalFormNo" class="modal"
             style="display: none; width: 100%; height: 100%; border-radius: 30px; background-color: rgba(0,0,0, 0.3); z-index: 1; overflow: auto">
            <div class="modal-content"
                 style="background-color: white; margin: 10% auto; border-radius: 30px; padding: 20px; width: 30%"><h2
                    style="margin: 30px auto">Регистрация ученика</h2>
                <div>
                    <form action="{% url 'parent_create_children_without_email' request.user.pk %}" method="POST"
                          enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form" id="form-student-without-email">
                            {% bootstrap_form student_without_email_register_form %}
                            <div class="row">
                                <div class="col-6 text-center">
                                    {% bootstrap_button button_type="submit" content='Сохранить' %}
                                </div>
                                <div class="col-6 text-center">
                                    <a id="btn-register-modal-without-email-close" class="btn btn-secondary">Закрыть</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>


    </div>
    </div>
    </div>






    </div>

    </div>



    </div>




<div id="commentModal" class="modal"
         style="display: none; width: 100%; height: 100%; border-radius: 30px; z-index: 1; overflow: auto">
        <div class="modal-content"
             style="background-color: white; margin: 10% auto; border-radius: 15px; padding: 20px; width: 30%; -webkit-box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2);
                                    -moz-box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2);
                                    box-shadow: 0px 0px 8px 4px rgba(34, 60, 80, 0.2);">
            <h2 style="margin: 20px auto; text-align:center; ">Комментарий преподавателя</h2>

            <p class="comment"></p>


            <div class="row justify-content-center">
              <div class="col-12 text-center">
                 <button id="btnClose" style="width: 20%" data-event_id="" data-member_id="" class="btn btn-success">Закрыть</button>
              </div>
            </div>




        </div>
    </div>

<script>

    window.addEventListener('load', function() {

    const commentModal = $('#commentModal');

    $('.btn-success').each(function() {
        $(this).on('click', function() {

        commentModal[0].style.display = "block";
        const rate_id = $(this).attr('data-rate_id');
        const rate_comment = $(this).attr('data-rate_comment');
        commentModal[0].style.display = "block";

        $(".comment").html(rate_comment);

        $('#btnClose').on('click', function(evt) {
            commentModal[0].style.display = "none";
        })

        });
    });
});
</script>


    <script>
        function clockTimer() {
            var date = new Date();

            var time = [date.getHours(), date.getMinutes(), date.getSeconds()]; // |[0] = Hours| |[1] = Minutes| |[2] = Seconds|
            var dayOfWeek = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"]
            var days = date.getDay();

            if (time[0] < 10) {
                time[0] = "0" + time[0];
            }
            if (time[1] < 10) {
                time[1] = "0" + time[1];
            }
            if (time[2] < 10) {
                time[2] = "0" + time[2];
            }

            var current_time = [time[0], time[1], time[2]].join(':');
            var clock = document.getElementById("clock");
            var day = document.getElementById("dayOfWeek");

            clock.innerHTML = current_time;
            day.innerHTML = dayOfWeek[days];


            setTimeout("clockTimer()", 1000);
        }
    </script>

    <script type="text/javascript" src="{% static 'js/add-modal-register-answer.js' %}"></script>
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/popper.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'vendors/nice-select/js/jquery.nice-select.min.js' %}"></script>
    <script src="{% static 'vendors/owl-carousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/owl-carousel-thumb.min.js' %}"></script>
    <script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'js/mail-script.js' %}"></script>
    <!--gmaps Js-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
    <script src="{% static 'js/gmaps.min.js' %}"></script>
    <script src="{% static 'js/theme.js' %}"></script>

{% endblock %}
